import{H as k,d as G,r as m,B as J,e as s,o as r,f as y,g as e,w as t,h as i,t as f,F as w,k as b,I as g,l as C,p as K,i as O,j as Q,_ as R}from"./index-D_ItP8f2.js";const W=(n,d)=>k.get(`/admin/product/list/${n}/${d}`),X=n=>k.get("/admin/product/onSale/"+n),Y=n=>k.get("/admin/product/cancelSale/"+n),Z=n=>k.get("/admin/product/getSkuInfo/"+n),ee=n=>k.delete("/admin/product/deleteSku/"+n),te=n=>(K("data-v-be6e0eec"),n=n(),O(),n),ae=te(()=>Q("h4",null,"查看商品詳情",-1)),le=G({__name:"index",setup(n){const d=m(1),x=m(10),z=m(0),I=m([]),h=m(!1),c=m({});J(()=>{S()});const S=async()=>{const l=await W(d.value,x.value);l.code===200&&(z.value=l.data.total,I.value=l.data.records)},q=l=>{d.value=l,S()},B=l=>{x.value=l,S()},D=async l=>{l.isSale===0?(await X(l.id),l.isSale=1,g.success("上架成功")):(await Y(l.id),l.isSale=0,g.success("下架成功"))},L=()=>{g.warning("功能待完善")},A=async l=>{h.value=!0;const o=await Z(l.id);o.code===200&&(c.value=o.data)},U=async l=>{const o=await ee(l.id);o.code===200?(g.success("刪除成功"),S()):g.error(`刪除失敗因為${o.data}`)};return(l,o)=>{const p=s("el-table-column"),N=s("el-image"),v=s("el-button"),E=s("el-popconfirm"),F=s("el-table"),j=s("el-pagination"),u=s("el-col"),_=s("el-row"),V=s("el-tag"),H=s("el-carousel-item"),M=s("el-carousel"),P=s("el-drawer"),T=s("el-card");return r(),y("div",null,[e(T,null,{default:t(()=>[e(F,{border:"",style:{margin:"10px 0px"},data:I.value},{default:t(()=>[e(p,{label:"序號",type:"index",aling:"center",width:"100px"}),e(p,{label:"名稱","show-overflow-tooltip":"",width:"225px",prop:"skuName"}),e(p,{label:"描述","show-overflow-tooltip":"",width:"225px",prop:"skuDesc"}),e(p,{label:"默認圖片",width:"225px"},{default:t(({row:a})=>[e(N,{src:a.skuDefaultImg,style:{width:"100px",height:"100px"}},null,8,["src"])]),_:1}),e(p,{label:"重量(克)",width:"225px",prop:"weight"}),e(p,{label:"價格",width:"225px",prop:"price"}),e(p,{label:"操作",width:"300px",fixed:"right"},{default:t(({row:a})=>[e(v,{title:a.isSale===0?"上架Sku":"下架Sku",type:a.isSale===0?"success":"info",size:"small",icon:a.isSale===0?"Top":"Bottom",onClick:$=>D(a)},null,8,["title","type","icon","onClick"]),e(v,{title:"編輯Sku",type:"warning",size:"small",icon:"Edit",onClick:L}),e(v,{title:"查看Sku詳情",type:"info",size:"small",icon:"InfoFilled",onClick:$=>A(a)},null,8,["onClick"]),e(E,{title:`你確定要刪除${a.skuName}嗎?`,onConfirm:$=>U(a)},{reference:t(()=>[e(v,{title:"刪除Sku",type:"danger",size:"small",icon:"Delete"})]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"]),e(j,{"current-page":d.value,"onUpdate:currentPage":o[0]||(o[0]=a=>d.value=a),"page-size":x.value,"onUpdate:pageSize":o[1]||(o[1]=a=>x.value=a),"page-sizes":[10,20,30,40],background:!0,layout:" prev, pager, next, jumper,->,sizes,total",total:z.value,onCurrentChange:q,onSizeChange:B},null,8,["current-page","page-size","total"]),e(P,{modelValue:h.value,"onUpdate:modelValue":o[2]||(o[2]=a=>h.value=a)},{header:t(()=>[ae]),default:t(()=>[e(_,{style:{margin:"10px 0px"}},{default:t(()=>[e(u,{span:6},{default:t(()=>[i("名稱")]),_:1}),e(u,{span:18},{default:t(()=>[i(f(c.value.skuName),1)]),_:1})]),_:1}),e(_,{style:{margin:"10px 0px"}},{default:t(()=>[e(u,{span:6},{default:t(()=>[i("描述")]),_:1}),e(u,{span:18},{default:t(()=>[i(f(c.value.skuDesc),1)]),_:1})]),_:1}),e(_,{style:{margin:"10px 0px"}},{default:t(()=>[e(u,{span:6},{default:t(()=>[i("價格")]),_:1}),e(u,{span:18},{default:t(()=>[i(f(c.value.price),1)]),_:1})]),_:1}),e(_,{style:{margin:"10px 0px"}},{default:t(()=>[e(u,{span:6},{default:t(()=>[i("平台屬性")]),_:1}),e(u,{span:18},{default:t(()=>[(r(!0),y(w,null,b(c.value.skuAttrValueList,a=>(r(),C(V,{type:"success",style:{margin:"5px 5px"},key:a.id},{default:t(()=>[i(f(a.valueName),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(_,{style:{margin:"10px 0px"}},{default:t(()=>[e(u,{span:6},{default:t(()=>[i("銷售屬性")]),_:1}),e(u,{span:18},{default:t(()=>[(r(!0),y(w,null,b(c.value.skuSaleAttrValueList,a=>(r(),C(V,{type:"warning",style:{margin:"5px"},key:a.id},{default:t(()=>[i(f(a.saleAttrValueName),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(_,{style:{margin:"10px 0px"}},{default:t(()=>[e(u,{span:6},{default:t(()=>[i("商品圖片")]),_:1}),e(u,{span:18},{default:t(()=>[e(M,{interval:4e3,type:"card",height:"200px"},{default:t(()=>[(r(!0),y(w,null,b(c.value.skuImageList,a=>(r(),C(H,{key:a.id},{default:t(()=>[e(N,{src:a.imgUrl,style:{width:"100%",height:"100%"}},null,8,["src"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})])}}}),se=R(le,[["__scopeId","data-v-be6e0eec"]]);export{se as default};
